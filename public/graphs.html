<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Line Charts</title>
	</head>
	<body>
		<script src="/js/jquery/jquery-1.10.2.min.js"></script>
		<script language="javascript" type="text/javascript" src="/js/jquery/jquery.jqplot.js"></script>
		<link rel="stylesheet" type="text/css" href="/css/jquery.jqplot.css" />
		<div id="chartdiv" style="height:400px;width:1000px; "></div>
		<script type="text/javascript">
			var sinPoints = [];
			$(document).ready(function(){
				// for (var i=0; i<10; i+=0.1){
				// 		console.log(i);
				//    		sinPoints.push([i,Math.sin(i)]);
				// 	} 
				// 	console.log(sinPoints);
					$.jqplot('chartdiv',	  
						{
					      // Give the plot a title.
					      title: 'FUCKING Plot.',
					      series:[{showMarker:false}],
					      dataRenderer: getDataForMyFuckingChart,
					      // You can specify options for all axes on the plot at once with
					      // the axesDefaults object.  Here, we're using a canvas renderer
					      // to draw the axis label which allows rotated text.
					      // An axes object holds options for all axes.
					      // Allowable axes are xaxis, x2axis, yaxis, y2axis, y3axis, ...
					      // Up to 9 y axes are supported.
					      axes: {
					        // options for each axis are specified in seperate option objects.
					        xaxis: {
					          label: "dayz",
					          // Turn off "padding".  This will allow data point to lie on the
					          // edges of the grid.  Default padding is 1.2 and will keep all
					          // points inside the bounds of the grid.
					          pad: 0
					        },
					        yaxis: {
					          label: "bitchies"
					        }
					      }
					   }
					);
				});
				var getDataForMyFuckingChart = function(userData, plotObject, options) {
					var test = marker.getLatLng();
					console.log(test);
					$.ajax({
				      // have to use synchronous here, else the function
				      // will return before the data is fetched
				      async: false,
				      url: "/getChartDataz?lat=43.60286732167262&lon=3.87317955493927",
				      dataType:"json",
				      success: function(data) {
				      		ret = [data];
				      	}
					});
				return ret;
			};
			// da url http://localhost:3000/getChartDataz?lat=43.60286732167262&lon=3.87317955493927
		</script>
	</body>
</html>