<!doctype html>
<html lang="fr">
<head>
	<meta charset="utf-8">
	<meta name=viewport content="user-scalable=no,width=device-width" />
	<title>Oops</title>
	<script>
	</script>
	<link rel="stylesheet" href="/css/oops.css"></link>
	<link rel="stylesheet" href="/js/jquery-mobile/jquery.mobile-1.3.2.min.css"></link>
	<link rel="stylesheet" href="/js/leaflet/leaflet.css"></link>
	<script src="/js/jquery/jquery-1.10.2.min.js"></script>
	<script src="/js/oops.js"></script>
	<script src="/js/jquery-mobile/jquery.mobile-1.3.2.min.js"></script>
	<script src="/js/leaflet/leaflet.js"></script>
	<script src="/js/ui.js"></script>
	<script language="javascript" type="text/javascript" src="/js/jquery/jquery.jqplot.js"></script>
	<link rel="stylesheet" type="text/css" href="/css/jquery.jqplot.css" />
	<script>
	jQuery(document).ready(function() {
		launchFullScreen(document.documentElement);
	  	if(navigator.geolocation) {
		        navigator.geolocation.getCurrentPosition(oops.setPosition, onError);             
	  	}
  	});
	</script>
	<script src="/js/d3/d3.v2.min.js"></script>
	<script src="/js/d3/xkcd.js"></script>
</head>
<body>
	<!-- SPLASH -->
	<div data-role="page" id="splashpage" data-theme="a" data-content-theme="a">
		<div data-role="header">
			<h1>Oops</h1>
		</div>
		<div data-role="content">
			<div id="splash">
				<a href="#home"  data-transition="slide"><img id="splashimg" src="/images/splash.png" alt="Track prune"></img></a>
				<div class="title">Original Open Pervenche Statistics</div>
			</div>
			<div class="caption">Édition Montpellier Agglo</div>
		</div>
	</div>

	<!-- HOME -->
	<div data-role="page" id="home" data-theme="a" data-content-theme="a">
		<div data-role="header">
			<a href="#home" data-rel="back">Retour</a>
			<h1>Oops</h1>
		</div>
		<div data-role="content">
			<div class="scan_prune">
				<a href="#mappage"  data-transition="slide"><img src="/images/scan_prune.png" alt="Track prune"></img></a>
			</div>
			<div class="track_prune">
				<a href="#addprunepage"  data-rel="dialog" data-transition="pop"><img src="/images/track_prune.png" alt="Track prune"></img></a>
			</div>
			<a href="#graphzpage" data-role="button" data-transition="slide">Tracer des prunes</a>
		</div>
	</div>

	<!-- MAP -->
	<div data-role="page" id="mappage" data-theme="a" data-content-theme="a">
		<div data-role="header">
			<a href="#home" data-rel="back">Retour</a>
			<h1>Oops</h1>
		</div>
		<div data-role="content" id="mapcontent">
			<div id="map"></div>
		</div>
	</div>

	<!-- ADD -->
	<div data-role="page" id="addprunepage" data-theme="a" data-content-theme="a">
		<div data-role="header">
			<a href="#home" data-rel="back">Retour</a>
			<h1>Oops</h1>
		</div>
		<div data-role="content">
			<ul>
				<li>
					<label for="date"> Date de la prune
					<input type="date" id="pvdate">
				</li>
				<li>
					<label for="date"> Heure de la prune
					<input type="date" id="pvhour">
				</li>
			</ul>		       	 
		</div>
	</div>
	<div data-role="page" id="graphzpage" data-theme="a" data-content-theme="a">
		<div data-role="header">
			<a href="#home" data-rel="back">Retour</a>
			<h1>Oops</h1>
		</div>
		<div data-role="content">
			<div id='graphz' data-role="page" data-theme="a" data-content-theme="a">
				<p>heya!</p>
				<!--
					* % de chance de prune
					* nb prune / heure général
					* nb prune / heure restraint
					* 
				-->
				<div id='graph1' style="width: 550px; height: 300px;">fu</div>
				<div id='graph2'></div>
				<div id='graph3'></div>
				<div id='graph4'></div>
				<script type="text/javascript">
					$(document).ready(function(){
							$.jqplot('graph1',	  
								{
							      // Give the fucking plot a title.
							      title: 'FUCKING Plot.',
							      series:[{showMarker:false}],
							      dataRenderer: getDataForMyFuckingChart,
							      // You can specify options for all axes on the plot at once with
							      // the axesDefaults object.  Here, we're using a canvas renderer
							      // to draw the axis label which allows rotated text.
							      // An axes object holds options for all axes.
							      // Allowable axes are xaxis, x2axis, yaxis, y2axis, y3axis, ...
							      // Up to 9 y axes are supported.
							      axes: {
							        // options for each axis are specified in seperate option objects.
							        xaxis: {
							          label: "dayz",
							          // Turn off "padding".  This will allow data point to lie on the
							          // edges of the grid.  Default padding is 1.2 and will keep all
							          // points inside the bounds of the grid.
							          pad: 0
							        },
							        yaxis: {
							          label: "bitchies"
							        }
							      }
							   }
							);
						});
						var getDataForMyFuckingChart = function(userData, plotObject, options) {
							// var test = marker.getLatLng();
							// console.log(test);
							$.ajax({
						      // have to use synchronous here, else the function
						      // will return before the data is fetched
						      async: false,
						      url: "/getChartDataz?lat=43.60286732167262&lon=3.87317955493927",
						      dataType:"json",
						      success: function(data) {
						      		ret = [data];
						      	}
							});
						return ret;
					};
					// da url http://localhost:3000/getChartDataz?lat=43.60286732167262&lon=3.87317955493927
		   	 	</script>
			</div>
		</div>
</body>
</html>
